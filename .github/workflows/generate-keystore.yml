name: Generate Keystore

on:
  workflow_dispatch:

jobs:
  generate:
    runs-on: ubuntu-latest
    steps:
      - name: Generate Keystore
        run: |
          keytool -genkey -v -keystore cmfa-release.keystore \
            -alias cmfa-key \
            -keyalg RSA -keysize 2048 -validity 10000 \
            -storepass CmfaRelease2024 \
            -keypass CmfaRelease2024 \
            -dname "CN=ClashMetaForAndroid, OU=Dev, O=CMFA, L=Beijing, ST=Beijing, C=CN"
          
          echo ""
          echo "=========================================="
          echo "KEYSTORE_BASE64 (copy this entire value):"
          echo "=========================================="
          base64 -w 0 cmfa-release.keystore
          echo ""
          echo ""
          echo "=========================================="
          echo "Other Secrets to add:"
          echo "=========================================="
          echo "KEYSTORE_PASSWORD: CmfaRelease2024"
          echo "KEY_ALIAS: cmfa-key"
          echo "KEY_PASSWORD: CmfaRelease2024"
